<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - GrantSysMMU</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div class="dashboard-container">
    
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-leaf" style="margin-right: 10px; color: var(--secondary-color);"></i> GrantSysMMU
        </div>
        <ul class="sidebar-menu">
                <li class="active"><a href="{{ url_for('admin_dashboard') }}"><i class="fas fa-th-large"></i> Dashboard</a></li>
                <li><a href="{{ url_for('admin_profile') }}"><i class="fas fa-user-circle"></i> My Account</a></li>
                <li><a href="{{ url_for('admin_user_management') }}"><i class="fas fa-users"></i> User
                        Management</a></li>
                <li><a href="{{ url_for('admin_proposal_management') }}"><i class="fas fa-file-contract"></i> Proposal Management</a></li>
                <li><a href="#"><i class="fas fa-chart-line"></i> Budget Tracking</a></li>
                <li><a href="{{ url_for('admin_system_data') }}"><i class="fas fa-cog"></i> System Configuration</a></li>
                <li style="margin-top: auto; border-top: 1px solid rgba(255,255,255,0.1);">
                    <a href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </li>
        </ul>
    </div>

    <div class="main-content">
        
        <div class="top-bar">
            <h2>Overview</h2>
            
            <div style="display: flex; align-items: center; gap: 25px;">
                
                <a href="{{ url_for('view_notifications') }}" style="position: relative; color: #555; font-size: 1.2rem; text-decoration: none;">
                    <i class="fas fa-bell"></i>
                    {% if unread_notifications > 0 %}
                    <span style="position: absolute; top: -8px; right: -8px; background: #c62828; color: white; border-radius: 50%; width: 18px; height: 18px; font-size: 0.7rem; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                        {{ unread_notifications }}
                    </span>
                    {% endif %}
                </a>

                <div style="width: 1px; height: 30px; background: #ddd;"></div>

                <div style="display: flex; align-items: center; gap: 15px;">
                    <div style="text-align: right; line-height: 1.3;">
                        <span style="display: block; font-weight: bold; color: #1b5e20;">{{ user.name }}</span>
                        <small style="color: #666;">Admin</small>
                    </div>
                    <a href="{{ url_for('admin_profile') }}">
                        <img src="{{ url_for('static', filename='profile_pics/' + user.profile_image) }}" 
                             alt="Profile" 
                             style="width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 2px solid #4caf50;">
                    </a>
                </div>
            </div>
        </div>

        <div class="content-wrapper">
            
            <div class="alert alert-success" style="border-left: 5px solid #27ae60; margin-bottom: 30px;">
                Welcome back, <strong>{{ user.name }}</strong>! System status is operational.
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-info">
                        <h3>{{ stats.pending_proposals }}</h3>
                        <p>Pending Proposals</p>
                    </div>
                    <i class="fas fa-file-alt stat-icon" style="color: #ff9800; background: #fff3e0; padding: 15px; border-radius: 50%;"></i>
                </div>
                
                <div class="stat-card">
                    <div class="stat-info">
                        <h3>{{ stats.active_grants }}</h3>
                        <p>Active Grants</p>
                    </div>
                    <i class="fas fa-award stat-icon" style="color: #4caf50; background: #e8f5e9; padding: 15px; border-radius: 50%;"></i>
                </div>

                <div class="stat-card">
                    <div class="stat-info">
                        <h3>{{ stats.total_users }}</h3>
                        <p>Total Users</p>
                    </div>
                    <i class="fas fa-users stat-icon" style="color: #2196f3; background: #e3f2fd; padding: 15px; border-radius: 50%;"></i>
                </div>
            </div>

            </div>
    </div>
</div>

</body>
</html>