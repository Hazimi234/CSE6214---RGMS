<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Create User - GrantSysMMU</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <div class="dashboard-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-user-shield" style="margin-right: 10px; color: var(--secondary-color);"></i> GrantSysMMU
            </div>
            <ul class="sidebar-menu">
                <li><a href="{{ url_for('admin_dashboard') }}"><i class="fas fa-th-large"></i> Dashboard</a></li>
                <li><a href="{{ url_for('admin_profile') }}"><i class="fas fa-user-circle"></i> My Account</a></li>
                <li class="active"><a href="{{ url_for('admin_user_management') }}"><i class="fas fa-users-cog"></i> User
                        Management</a></li>
                <li><a href="{{ url_for('admin_proposal_management') }}"><i class="fas fa-file-contract"></i> Grant Cycle & Proposal Management</a></li>
                <li><a href="{{ url_for('admin_budget_tracking') }}"><i class="fas fa-chart-line"></i> Budget Tracking</a></li>
                <li><a href="{{ url_for('admin_system_data') }}"><i class="fas fa-cog"></i> System Configuration</a>
                </li>
                <li style="margin-top: auto; border-top: 1px solid rgba(255,255,255,0.1);">
                    <a href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </li>
            </ul>
        </div>

        <div class="main-content">
            <div class="top-bar">
                <h2>Create New User</h2>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span>{{ user.name }}</span>
                    <img src="{{ url_for('static', filename='profile_pics/' + user.profile_image) }}"
                        style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                </div>
            </div>

            <div class="content-wrapper">
                <div class="login-card" style="max-width: 700px; text-align: left; margin: 0 auto;">
                    <h3 style="color: #1b5e20; margin-bottom: 20px;"><i class="fas fa-user-plus"></i> New User
                        Registration</h3>

                    <form method="POST" action="{{ url_for('admin_create_user') }}">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">

                            <div class="form-group">
                                <label>MMU ID</label>
                                <input type="text" name="mmu_id" placeholder="e.g. 1201" required>
                            </div>

                            <div class="form-group">
                                <label>Role</label>
                                <select name="role"
                                    style="width: 100%; padding: 12px; border: 1px solid #c8e6c9; border-radius: 8px; background: #fafafa;"
                                    required>
                                    <option value="Researcher">Researcher</option>
                                    <option value="Reviewer">Reviewer</option>
                                    <option value="HOD">Head of Department (HOD)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" name="name" placeholder="Full Name" required>
                            </div>

                            <div class="form-group">
                                <label>Faculty</label>
                                <select name="faculty"
                                    style="width: 100%; padding: 12px; border: 1px solid #c8e6c9; border-radius: 8px; background: #fafafa; font-size: 1rem; color: #333;"
                                    required>
                                    <option value="">-- Select Faculty --</option>
                                    {% for f in faculties %}
                                    <option value="{{ f.name }}">{{ f.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="form-group" style="grid-column: span 2;">
                                <label>Email Address</label>
                                <input type="email" name="email" placeholder="email@mmu.edu.my" required>
                            </div>

                            <div class="form-group" style="grid-column: span 2;">
                                <label>Initial Password</label>
                                <input type="password" name="password" placeholder="Create a password" required>
                            </div>
                        </div>

                        <div style="margin-top: 25px; display: flex; gap: 10px;">
                            <button type="submit" class="btn-primary" style="margin: 0;">Create User</button>
                            <a href="{{ url_for('admin_user_management') }}" class="btn-outline"
                                style="text-align: center; width: 100px; padding: 14px;">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>